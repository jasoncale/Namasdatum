.calendar.row
  %h2.fourcol=@current_time.strftime("%B")
  
  %ol.group.twelvecol
    -Time.days_in_month(@current_time.month).times do |i|
      - date = i+1
      - lessons_on_this_day = @lessons.select{|lesson| lesson.attended_at.day == date }
      - css_classes = []      
      - css_classes << "attended" unless lessons_on_this_day.blank?
      - css_classes << "in_the_future" if date > @current_time.day
      - css_classes << "today" if date == @current_time.day
      
      %li{:class => css_classes }
        -if lessons_on_this_day.present?
          %img{:src => "/images/stamp.png"}
        %h3.date=date
        -lessons_on_this_day.each do |lesson|
          .lesson
            %h3.teacher=lesson.teacher.name
            %p.lesson_time=lesson.attended_at.strftime('%H:%M %p')
